// Module included in the following assemblies:
//
// * scalability_and_performance/ztp_far_edge/ztp-advanced-policy-config.adoc

:_module-type: CONCEPT
[id="ztp-add-local-registry-for-edge-clusters_{context}"]
= Creating a local image registry on a managed cluster

{product-title} manages image caching using a local registry. In edge computing use cases, clusters are often subject to bandwidth restrictions when communicating with centralized image registries. This can lead to long image download times. This is unavoidable for the initial deployment. In the case of a disorderly cluster shutdown, there is also the potential that the CRI-O cluster process wipes the content of `/var/lib/containers/storage`.

To address these issues, you can create a local image registry on the remote managed cluster using GitOps ZTP. This is useful in Edge computing scenarios where clusters are deployed on the far edge of the network.

[NOTE]
====
The local image registry can only be used for user application images and cannot be used for {product-title} or Operator Lifecycle Manager operator images.
====

At a high level, you configure local caching of images for a cluster as follows:

. Deploy the cluster using ZTP GitOps and a `SiteConfig` CR that references a `MachineConfig` CR that configures disk partitioning on the cluster.
. Configure the local image registry using `PolicyGenTemplate` (PGT) CRs that create `PersistentVolume` (PV) and `PersistentVolumeClaim` (PVC) CRs.
. Patch the `imageregistry` configuration.
